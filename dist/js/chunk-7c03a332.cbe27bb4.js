(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c03a332"],{"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("d3b7");function n(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function s(t){n(o,i,a,s,l,"next",t)}function l(t){n(o,i,a,s,l,"throw",t)}s(void 0)}))}}},8788:function(t,e,r){"use strict";var n=r("8dcd"),i=r.n(n);i.a},"8dcd":function(t,e,r){},"96cf":function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",c="object"===typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{u=e.regeneratorRuntime=c?t.exports:{},u.wrap=b;var p="suspendedStart",d="suspendedYield",h="executing",f="completed",m={},g={};g[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(z([])));w&&w!==n&&i.call(w,o)&&(g=w);var v=L.prototype=_.prototype=Object.create(g);k.prototype=v.constructor=L,L.constructor=k,L[l]=k.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(v),t},u.awrap=function(t){return{__await:t}},S(P.prototype),P.prototype[s]=function(){return this},u.AsyncIterator=P,u.async=function(t,e,r,n){var i=new P(b(t,e,r,n));return u.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(v),v[l]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=z,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),m}}}function b(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),o=new C(n||[]);return a._invoke=T(t,r,o),a}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}function _(){}function k(){}function L(){}function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function P(t){function e(r,n,a,o){var s=x(t[r],t,n);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(c).then((function(t){l.value=t,a(l)}),o)}o(s.arg)}var r;function n(t,n){function i(){return new Promise((function(r,i){e(t,n,r,i)}))}return r=r?r.then(i,i):i()}this._invoke=n}function T(t,e,r){var n=p;return function(i,a){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return O()}r.method=i,r.arg=a;while(1){var o=r.delegate;if(o){var s=$(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=x(t,e,r);if("normal"===l.type){if(n=r.done?f:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=f,r.method="throw",r.arg=l.arg)}}}function $(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,$(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=x(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function z(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){while(++n<t.length)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},a434:function(t,e,r){"use strict";var n=r("23e7"),i=r("23cb"),a=r("a691"),o=r("50c4"),s=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),p=r("ae40"),d=u("splice"),h=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,g=9007199254740991,y="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!h},{splice:function(t,e){var r,n,u,p,d,h,w=s(this),v=o(w.length),b=i(t,v),x=arguments.length;if(0===x?r=n=0:1===x?(r=0,n=v-b):(r=x-2,n=m(f(a(e),0),v-b)),v+r-n>g)throw TypeError(y);for(u=l(w,n),p=0;p<n;p++)d=b+p,d in w&&c(u,p,w[d]);if(u.length=n,r<n){for(p=b;p<v-n;p++)d=p+n,h=p+r,d in w?w[h]=w[d]:delete w[h];for(p=v;p>v-n+r;p--)delete w[p-1]}else if(r>n)for(p=v-n;p>b;p--)d=p+n-1,h=p+r-1,d in w?w[h]=w[d]:delete w[h];for(p=0;p<r;p++)w[p+b]=arguments[p+2];return w.length=v-n+r,u}})},e01a:function(t,e,r){"use strict";var n=r("23e7"),i=r("83ab"),a=r("da84"),o=r("5135"),s=r("861d"),l=r("9bf2").f,c=r("e893"),u=a.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var p={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(p[e]=!0),e};c(d,u);var h=d.prototype=u.prototype;h.constructor=d;var f=h.toString,m="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=f.call(t);if(o(p,t))return"";var r=m?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:d})}},f10e:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("公益性子系统")]),r("el-breadcrumb-item",[t._v("供求信息管理")])],1),r("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"全部供求信息",name:"all"}}),r("el-tab-pane",{attrs:{label:"供应信息管理",name:"supply"}}),r("el-tab-pane",{attrs:{label:"求购信息管理",name:"demand"}})],1),r("el-card",{staticClass:"article-card"},[r("div",[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.handleBatchRemove()}}},[t._v("批量删除")]),r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:t.addRow}},[t._v("添加供求信息")]),r("el-input",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{size:"small",clearable:"",placeholder:"标题"},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),r("el-input",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{size:"small",clearable:"",placeholder:"联系人"},model:{value:t.listQuery.contactPerson,callback:function(e){t.$set(t.listQuery,"contactPerson",e)},expression:"listQuery.contactPerson"}}),r("el-select",{staticClass:"filter-item",staticStyle:{width:"130px","margin-left":"0.5rem"},attrs:{size:"small",placeholder:"审核状态",clearable:""},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.stateTypeOptions,(function(t){return r("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1),r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0.5rem"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" 查询 ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.rows,border:"",stripe:"",fit:"","highlight-current-row":"","row-style":{height:"5px"},"cell-style":{padding:"5px 0"},height:t.curHeight},on:{"selection-change":t.checkSelect}},[r("el-table-column",{attrs:{type:"selection",width:"40",label:"全选"}}),r("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s((t.listQuery.page-1)*t.listQuery.size+e.$index+1)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"标题","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{effect:"light",content:e.row.title,placement:"top"}},[r("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(r){return t.editDialogRow(e.row)}}},[t._v(t._s(e.row.title)+" ")])],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"联系人",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contactPerson)+" ")]}}])}),r("el-table-column",{attrs:{align:"center",label:"联系电话",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.phone))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"所在地区",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.area))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"发布时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.pubTime))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"描述","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{placement:"top-start",title:"描述",width:"250",trigger:"hover"}},[r("div",[t._v(t._s(e.row.description))]),e.row.hasOwnProperty("description")&&JSON.stringify(e.row.description).length>15?r("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.description.substr(0,15))+"... ")]):r("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(e.row.description)+" ")])])]}}])}),r("el-table-column",{attrs:{align:"center",label:"审核状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.status?r("el-button",{staticStyle:{width:"80px"},attrs:{type:"danger",size:"mini"},on:{click:function(r){return t.handleModifyStatus(e.row,"1")}}},[t._v(" 待审核 ")]):t._e(),"1"===e.row.status?r("el-button",{staticStyle:{width:"80px"},attrs:{type:"success",size:"mini"},on:{click:function(r){return t.handleModifyStatus(e.row,"-1")}}},[t._v(" 审核通过 ")]):t._e(),"-1"===e.row.status?r("el-button",{staticStyle:{width:"90px"},attrs:{type:"warning",size:"mini"},on:{click:function(r){return t.handleModifyStatus(e.row,"0")}}},[t._v(" 审核未通过 ")]):t._e(),"-1"!==e.row.status&&"0"!==e.row.status&&"1"!==e.row.status?r("el-button",{staticStyle:{width:"90px"},attrs:{type:"info",size:"mini"},on:{click:function(r){return t.handleModifyStatus(e.row,"0")}}},[t._v(" 未知状态 ")]):t._e()]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return t.editDialogRow(e.row)}}},[t._v("编辑 ")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return t.deleteRow(e.row.id)}}},[t._v("删除 ")])]}}])})],1),r("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-sizes":[15,20,25,30],"page-size":t.listQuery.pageRow,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("el-dialog",{staticClass:"row-form",attrs:{title:"供求信息管理",center:"",visible:t.dialogShow,top:"7vh",width:"50%"},on:{close:function(e){return t.DialogClose()},"update:visible":function(e){t.dialogShow=e}}},[r("el-form",{ref:"addFormRef",staticClass:"demo-ruleForm",attrs:{model:t.row,"label-width":"100px",rules:t.rules}},[r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"基本信息"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"标题:",prop:"title"}},[r("el-input",{attrs:{clearable:"",maxlength:"20",placeholder:"请输入标题"},model:{value:t.row.title,callback:function(e){t.$set(t.row,"title",e)},expression:"row.title"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"供求类型",prop:"pubType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择供求类型"},model:{value:t.row.pubType,callback:function(e){t.$set(t.row,"pubType",e)},expression:"row.pubType"}},t._l(t.pubTypeOptions,(function(t){return r("el-option",{key:t.display_name,attrs:{label:t.display_name,value:t.key}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系人:",prop:"contactPerson"}},[r("el-input",{attrs:{clearable:"",maxlength:"20",placeholder:"请输入联系人"},model:{value:t.row.contactPerson,callback:function(e){t.$set(t.row,"contactPerson",e)},expression:"row.contactPerson"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话:",prop:"phone"}},[r("el-input",{attrs:{clearable:"",maxlength:"11",placeholder:"请输入联系电话"},model:{value:t.row.phone,callback:function(e){t.$set(t.row,"phone",e)},expression:"row.phone"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所在地区:",prop:"area"}},[r("el-input",{attrs:{clearable:"",maxlength:"20",placeholder:"请输入所在地区"},model:{value:t.row.area,callback:function(e){t.$set(t.row,"area",e)},expression:"row.area"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"审核状态:",prop:"status"}},[r("el-radio",{attrs:{label:"0"},model:{value:t.row.status,callback:function(e){t.$set(t.row,"status",e)},expression:"row.status"}},[t._v("待审核")]),r("el-radio",{attrs:{label:"1"},model:{value:t.row.status,callback:function(e){t.$set(t.row,"status",e)},expression:"row.status"}},[t._v("审核通过")]),r("el-radio",{attrs:{label:"-1"},model:{value:t.row.status,callback:function(e){t.$set(t.row,"status",e)},expression:"row.status"}},[t._v("审核未通过")])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"描述:",prop:"description"}},[r("el-input",{attrs:{clearable:"",type:"textarea",autosize:{minRows:5,maxRows:10},placeholder:"请输入产品描述"},model:{value:t.row.description,callback:function(e){t.$set(t.row,"description",e)},expression:"row.description"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"发布时间:",prop:"pubTime"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择发布时间"},model:{value:t.row.pubTime,callback:function(e){t.$set(t.row,"pubTime",e)},expression:"row.pubTime"}})],1)],1)],1),r("el-row",[r("el-col",{staticClass:"register-upload",attrs:{span:24}},[r("el-form-item",{attrs:{label:"产品图片:",prop:"pic"}},[r("el-upload",{attrs:{action:t.updateUrl,"http-request":t.httpRequest,"before-upload":t.beforeAvatarUpload,"on-preview":t.handleProductPreview,"on-remove":t.handleProductRemove,"on-change":t.handleProductChange,"list-type":"picture-card","file-list":t.fileProductList}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:t.dialogProductVisible,width:"70%",top:"5vh","append-to-body":!0},on:{"update:visible":function(e){t.dialogProductVisible=e}}},[r("img",{attrs:{width:"100%",src:t.imageUrl,alt:""}})]),r("div",{staticClass:"upload-div"},t._l(t.imgRemoveLists,(function(e,n){return r("div",{key:n,staticClass:"upload-div-list"},[r("div",{staticClass:"upload-div-top"},[r("span",{staticClass:"upload-div-del",on:{click:function(r){return t.fileDelIdPhoto(n,e.id)}}},[t._v("X")])]),r("el-image",{staticClass:"el-image-preview",attrs:{src:"http://"+e.path,"preview-src-list":t.srcList}})],1)})),0)],1)],1)],1)],1)],1),r("span",{staticClass:"t-btn"},[r("el-button",{attrs:{type:"info"},on:{click:function(e){t.dialogShow=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"success"},on:{click:t.submitRow}},[t._v("提 交")])],1)],1)],1),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},i=[],a=(r("a4d3"),r("e01a"),r("4160"),r("d81d"),r("a434"),r("159b"),r("96cf"),r("1da1")),o=r("a66f"),s=[{key:"0",display_name:"待审核"},{key:"1",display_name:"审核通过"},{key:"-1",display_name:"审核不通过"}],l=[{key:"0",display_name:"供应信息"},{key:"1",display_name:"求购信息"}],c={data:function(){return{stateTypeOptions:s,pubTypeOptions:l,activeName:"all",listQuery:{page:1,size:15,pubType:"",title:"",contactPerson:""},total:0,rows:[],row:{title:"",contactPerson:"",phone:"",area:"",description:"",pubType:"",pubTime:"",status:"审核通过",imgLists:[]},deleteIds:[],srcList:[],dialogProductVisible:!1,productRemoveListPhoto:[],imgRemoveLists:[],fileProductList:[],updateUrl:"#",imageUrl:"",dialogShow:!1,listLoading:!1,curHeight:0,ids:[],flag:"add",rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],area:[{required:!0,message:"请输入服务地区",trigger:"blur"}],description:[{required:!0,message:"请输入描述信息",trigger:"blur"}],pubType:[{required:!0,message:"请选择供求类型",trigger:"blur"}],status:[{required:!0,message:"请选择审核状态",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1}},created:function(){var t=this;this.getList(),this.setTableHeight(),window.onresize=function(){t.setTableHeight()}},methods:{fileDelIdPhoto:function(t,e){var r=this;this.$confirm("此操作将永久删除该图片, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.deleteIds.push(e),r.imgRemoveLists.splice(t,1)})).catch((function(){r.$message({duration:1e3,type:"info",message:"已取消操作"})}))},handleProductChange:function(t,e){this.fileProductList=e},handleProductRemove:function(t,e){for(var r in this.productRemoveListPhoto)this.productRemoveListPhoto[r].key===t.uid&&this.productRemoveListPhoto.splice(r,1);this.fileProductList=e},handleProductPreview:function(t){this.imageUrl=t.url,this.dialogProductVisible=!0},getList:function(){var t=this;this.listLoading=!0,"supply"===this.activeName?this.listQuery.pubType="0":"demand"===this.activeName?this.listQuery.pubType="1":"all"===this.activeName&&(this.listQuery.pubType="");var e=this.listQuery;o["a"].getSupplyDemandListByPage(e).then((function(e){if(200!==e.status)return t.$message.error("获取失败");t.rows=e.data.rows,t.listLoading=!1,t.total=e.data.total}))},handleImgUrl:function(t){var e=[];return t.map((function(t){e.push("http://"+t)})),e},handleFilter:function(){this.listQuery.page=1,this.getList()},handleClick:function(){console.log("点击tab栏事件"),this.getList()},checkSelect:function(t){var e=this;console.log(t),t.forEach((function(t){e.ids.push(t.id)}))},handleBatchRemove:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.ids.length){e.next=2;break}return e.abrupt("return",t.$message.warning("请先选中要删除的供求信息"));case 2:return e.next=4,t.$confirm("此操作将删除选中供求信息,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 4:if(r=e.sent,"confirm"===r){e.next=7;break}return e.abrupt("return",t.$message.info("已经取消删除"));case 7:o["a"].delSupplyDemandById(t.ids).then((function(e){if(200!==e.status)return t.$message.error("删除供求信息失败");t.$message.success("删除供求信息成功"),t.getList()}));case 8:case"end":return e.stop()}}),e)})))()},handleModifyStatus:function(t,e){var r,n=this;"-1"===e&&(r="审核不通过"),"0"===e&&(r="待审核"),"1"===e&&(r="审核通过"),this.$confirm("是否将审核状态修改为 ".concat(r," ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.status=e,o["a"].updateSupplyDemandStatus(t).then((function(t){200===t.status&&n.$message({message:"操作成功，已修改为".concat(r),type:"success"})}))})).catch((function(){n.$message({type:"info",message:"已取消操作"})}))},addRow:function(){this.flag="add","supply"===this.activeName?this.row.pubType="0":"demand"===this.activeName?this.row.pubType="1":this.row.pubType="0",this.row.pubTime=this.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),this.row.status="1",this.dialogShow=!0},setTableHeight:function(){var t=document.documentElement.clientHeight||document.body.clientHeight;this.curHeight=t-280},editDialogRow:function(t){var e=this;this.flag="edit",this.row=t,this.imgRemoveLists=t.imgLists,t.imgLists.map((function(t){e.srcList.push("http://"+t.path)})),this.dialogShow=!0},handleSizeChange:function(t){this.listQuery.size=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},deleteRow:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=[],n.push(t),r.next=4,e.$confirm("此操作将删除该供求信息,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 4:if(i=r.sent,"confirm"===i){r.next=7;break}return r.abrupt("return",e.$message.info("已经取消删除"));case 7:o["a"].delSupplyDemandById(n).then((function(t){if(200!==t.status)return e.$message.error("删除供求信息失败");e.$message.success("删除供求信息成功"),e.getList()}));case 8:case"end":return r.stop()}}),r)})))()},DialogClose:function(){this.fileProductList=[],this.imgRemoveLists=[],this.deleteIds=[],this.$refs.addFormRef.resetFields(),this.$refs.addFormRef.clearValidate(),this.getList()},httpRequest:function(t){var e=new FileReader,r=t.file;e.readAsDataURL(r),e.onloadend=function(){this.imageUrl=this.result}},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,r="image/png"===t.type;return e||r||this.$message.error("上传图片格式只能为.jpg或.png!"),e||r},handleExceed:function(){this.$message.warning("只能上传 ".concat(this.limit," 张图片。"))},submitRow:function(){var t=this;this.$refs.addFormRef.validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",t.$message.error("信息填写不完整或不准确，请检查再提交！"));case 2:n=new FormData,n.append("files",t.multfileImg),n.append("title",t.row.title),n.append("contactPerson",t.row.contactPerson),n.append("phone",t.row.phone),n.append("status",t.row.status),t.row.pubTime=t.$moment(new Date).format("YYYY-MM-DD HH:mm:ss"),n.append("pubTime",t.row.pubTime),n.append("area",t.row.area),n.append("pubType",t.row.pubType),n.append("description",t.row.description),t.fileProductList.forEach((function(t){n.append("files",t.raw)})),"add"===t.flag?(console.log("新增"),console.log("审核状态:",t.row.status),console.log("供求类型:",t.row.pubType),o["a"].addSupplyDemand(n).then((function(e){if(200!==e.status)return t.$message.error("失败");t.$message.success("新增成功"),t.dialogShow=!1,t.getList()}))):"edit"===t.flag&&(console.log("更新"),t.deleteIds.map((function(t){console.log(t),n.append("delIds",t)})),n.append("id",t.row.id),o["a"].updateSupplyDemand(n).then((function(e){if(200!==e.status)return t.$message.error("失败");t.$message.success("更新成功"),t.dialogShow=!1,t.getList()})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},u=c,p=(r("8788"),r("2877")),d=Object(p["a"])(u,n,i,!1,null,"8a177410",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-7c03a332.cbe27bb4.js.map